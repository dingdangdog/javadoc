<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (22) -->
<title>Arena (Java SE 22 &amp; JDK 22)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: java.base, package: java.lang.foreign, interface: Arena">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="java.lang.foreign.Arena interface">
<meta name="keywords" content="ofAuto()">
<meta name="keywords" content="global()">
<meta name="keywords" content="ofConfined()">
<meta name="keywords" content="ofShared()">
<meta name="keywords" content="allocate()">
<meta name="keywords" content="scope()">
<meta name="keywords" content="close()">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 14px;"><strong>Java SE 22 &amp; JDK 22</strong> </div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Arena.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">java.base</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">java.lang.foreign</a></div>
<h1 title="Interface Arena" class="title">Interface Arena</h1>
</div>
<section class="class-description" id="class-description">
<div class="horizontal-scroll">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="../AutoCloseable.html" title="interface in java.lang">AutoCloseable</a></code>, <code><a href="SegmentAllocator.html" title="interface in java.lang.foreign">SegmentAllocator</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">Arena</span><span class="extends-implements">
extends <a href="SegmentAllocator.html" title="interface in java.lang.foreign">SegmentAllocator</a>, <a href="../AutoCloseable.html" title="interface in java.lang">AutoCloseable</a></span></div>
<div class="block">An arena controls the lifecycle of native memory segments, providing both flexible
 allocation and timely deallocation.
 <p>
 An arena has a <a href="MemorySegment.Scope.html" title="interface in java.lang.foreign">scope</a> - the <em>arena scope</em>.
 All the segments allocated by the arena are associated with the arena scope. As such,
 the arena determines the temporal bounds of all the memory segments allocated by it.
 <p>
 Moreover, an arena also determines whether access to memory segments allocated by it
 should be <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">restricted</a> to specific
 threads. An arena is a <a href="SegmentAllocator.html" title="interface in java.lang.foreign"><code>SegmentAllocator</code></a> and features several allocation
 methods that can be used by clients to obtain native segments.
 <p>
 The simplest arena is the <a href="#global()">global arena</a>. The global arena
 features an <em>unbounded lifetime</em>. The scope of the global arena is the global
 scope. As such, native segments allocated with the global arena are always accessible
 and their backing regions of memory are never deallocated. Moreover, memory segments
 allocated with the global arena can be <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a>
 from any thread.
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java"> MemorySegment segment = Arena.<span class="bold">global</span>().allocate(100, 1);
 ...
 // segment is never deallocated!
</code></pre>
</div>

 <p>
 Alternatively, clients can obtain an <a href="#ofAuto()">automatic arena</a>, that
 is an arena which features a <em>bounded lifetime</em> that is managed, automatically,
 by the garbage collector. The scope of an automatic arena is an automatic scope. As
 such, the regions of memory backing memory segments allocated with the automatic arena
 are deallocated at some unspecified time <em>after</em> the automatic arena (and all
 the segments allocated by it) becomes <a href="../../../java/lang/ref/package.html#reachability">unreachable</a>,
 as shown below:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java"> MemorySegment segment = Arena.<span class="bold">ofAuto</span>().allocate(100, 1);
 ...
 segment = null; // the segment region becomes available for deallocation after this point
</code></pre>
</div>

 Memory segments allocated with an automatic arena can also be
 <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a> from any thread.
 <p>
 Rather than leaving deallocation in the hands of the Java runtime, clients will often
 wish to exercise control over the timing of deallocation for regions of memory that
 back memory segments. Two kinds of arenas support this, namely <a href="#ofConfined()">confined</a>
 and <a href="#ofShared()">shared</a> arenas. They both feature bounded lifetimes that
 are managed manually. For instance, when a confined arena is <a href="#close()">closed</a>
 successfully, its scope is <a href="MemorySegment.Scope.html#isAlive()">invalidated</a>. As a result, all
 the memory segments allocated by the arena can no longer be accessed, and their
 regions of memory are deallocated:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java"> MemorySegment segment = null;
 try (Arena arena = Arena.<span class="bold">ofConfined</span>()) {
     segment = arena.allocate(100);
     ...
 } // segment region deallocated here
 segment.get(ValueLayout.JAVA_BYTE, 0); // throws IllegalStateException
</code></pre>
</div>


 Memory segments allocated with a <a href="#ofConfined()">confined arena</a> can only be
 accessed (and closed) by the thread that created the arena. If access to a memory
 segment from multiple threads is required, clients can allocate segments in a
 <a href="#ofShared()">shared arena</a> instead.
 <p>
 The characteristics of the various arenas are summarized in the following table:

 <blockquote><table class="plain">
 <caption style="display:none">Arenas characteristics</caption>
 <thead>
 <tr>
     <th scope="col">Kind</th>
     <th scope="col">Bounded lifetime</th>
     <th scope="col">Explicitly closeable</th>
     <th scope="col">Accessible from multiple threads</th>
 </tr>
 </thead>
 <tbody>
 <tr><th scope="row" style="font-weight:normal">Global</th>
     <td style="text-align:center;">No</td>
     <td style="text-align:center;">No</td>
     <td style="text-align:center;">Yes</td></tr>
 <tr><th scope="row" style="font-weight:normal">Automatic</th>
     <td style="text-align:center;">Yes</td>
     <td style="text-align:center;">No</td>
     <td style="text-align:center;">Yes</td></tr>
 <tr><th scope="row" style="font-weight:normal">Confined</th>
     <td style="text-align:center;">Yes</td>
     <td style="text-align:center;">Yes</td>
     <td style="text-align:center;">No</td></tr>
 <tr><th scope="row" style="font-weight:normal">Shared</th>
     <td style="text-align:center;">Yes</td>
     <td style="text-align:center;">Yes</td>
     <td style="text-align:center;">Yes</td></tr>
 </tbody>
 </table></blockquote>

 <h2 id="thread-confinement">Safety and thread-confinement</h2>

 Arenas provide strong temporal safety guarantees: a memory segment allocated by an
 arena cannot be accessed <em>after</em> the arena has been closed. The cost of
 providing this guarantee varies based on the number of threads that have access to the
 memory segments allocated by the arena. For instance, if an arena is always created
 and closed by one thread, and the memory segments allocated by the arena are always
 accessed by that same thread, then ensuring correctness is trivial.
 <p>
 Conversely, if an arena allocates segments that can be accessed by multiple threads,
 or if the arena can be closed by a thread other than the accessing thread, then
 ensuring correctness is much more complex. For example, a segment allocated with the
 arena might be accessed <em>while</em> another thread attempts, concurrently, to close
 the arena. To provide the strong temporal safety guarantee without forcing every
 client, even simple ones, to incur a performance impact, arenas are divided into
 <em>thread-confined</em> arenas, and <em>shared</em> arenas.
 <p>
 Confined arenas, support strong thread-confinement guarantees. Upon creation, they are
 assigned an <em>owner thread</em>, typically the thread which initiated the creation
 operation. The segments created by a confined arena can only be
 <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a> by the owner thread.
 Moreover, any attempt to close the confined arena from a thread other than the owner
 thread will fail with a <a href="../WrongThreadException.html" title="class in java.lang"><code>WrongThreadException</code></a>.
 <p>
 Shared arenas, on the other hand, have no owner thread. The segments created by a
 shared arena can be <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a> by
 any thread. This might be useful when multiple threads need to access the same memory
 segment concurrently (e.g. in the case of parallel processing). Moreover, a shared
 arena can be closed by any thread.

 <h2 id="custom-arenas">Custom arenas</h2>

 Clients can define custom arenas to implement more efficient allocation strategies,
 or to have better control over when (and by whom) an arena can be closed. As an
 example, the following code defines a <em>slicing arena</em> that behaves like a
 confined arena (i.e., single-threaded access), but internally uses a
 <a href="SegmentAllocator.html#slicingAllocator(java.lang.foreign.MemorySegment)">slicing allocator</a> to
 respond to allocation requests.
 When the slicing arena is closed, the underlying confined arena is also closed; this
 will invalidate all segments allocated with the slicing arena (since the scope of the
 slicing arena is the same as that of the underlying confined arena):

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">class SlicingArena implements Arena {
    final Arena arena = Arena.ofConfined();
    final SegmentAllocator slicingAllocator;

    SlicingArena(long size) {
        slicingAllocator = SegmentAllocator.slicingAllocator(arena.allocate(size));
    }

    public MemorySegment allocate(long byteSize, long byteAlignment) {
        return slicingAllocator.allocate(byteSize, byteAlignment);
    }

    public MemorySegment.Scope scope() {
        return arena.scope();
    }

    public void close() {
        arena.close();
    }

}
</code></pre>
</div>


 In other words, a slicing arena provides a vastly more efficient and scalable
 allocation strategy, while still retaining the timely deallocation guarantee provided
 by the underlying confined arena:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">try (Arena slicingArena = new SlicingArena(1000)) {
    for (int i = 0; i &lt; 10; i++) {
        MemorySegment s = slicingArena.allocateFrom(JAVA_INT, 1, 2, 3, 4, 5);
        ...
    }
} // all memory allocated is released here
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>Implementations of this interface are thread-safe.</dd>
<dt>Since:</dt>
<dd>22</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="MemorySegment.html" title="interface in java.lang.foreign"><code>MemorySegment</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="MemorySegment.html" title="interface in java.lang.foreign">MemorySegment</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#allocate(long,long)" class="member-name-link">allocate</a><wbr>(long&nbsp;byteSize,
 long&nbsp;byteAlignment)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a native memory segment with the given size (in bytes) and alignment
 constraint (in bytes).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Closes this arena.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="Arena.html" title="interface in java.lang.foreign">Arena</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#global()" class="member-name-link">global</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns the global arena.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="Arena.html" title="interface in java.lang.foreign">Arena</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#ofAuto()" class="member-name-link">ofAuto</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a new arena that is managed, automatically, by the garbage collector.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="Arena.html" title="interface in java.lang.foreign">Arena</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#ofConfined()" class="member-name-link">ofConfined</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new confined arena.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="Arena.html" title="interface in java.lang.foreign">Arena</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#ofShared()" class="member-name-link">ofShared</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new shared arena.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="MemorySegment.Scope.html" title="interface in java.lang.foreign">MemorySegment.Scope</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#scope()" class="member-name-link">scope</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the arena scope.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.foreign.SegmentAllocator">Methods declared in interface&nbsp;java.lang.foreign.<a href="SegmentAllocator.html" title="interface in java.lang.foreign">SegmentAllocator</a></h3>
<code><a href="SegmentAllocator.html#allocate(long)">allocate</a>, <a href="SegmentAllocator.html#allocate(java.lang.foreign.MemoryLayout)">allocate</a>, <a href="SegmentAllocator.html#allocate(java.lang.foreign.MemoryLayout,long)">allocate</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.AddressLayout,java.lang.foreign.MemorySegment)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfByte,byte)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfByte,byte...)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfChar,char)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfChar,char...)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfDouble,double)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfDouble,double...)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfFloat,float)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfFloat,float...)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfInt,int)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfInt,int...)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfLong,long)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfLong,long...)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfShort,short)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout.OfShort,short...)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.foreign.ValueLayout,java.lang.foreign.MemorySegment,java.lang.foreign.ValueLayout,long,long)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.String)">allocateFrom</a>, <a href="SegmentAllocator.html#allocateFrom(java.lang.String,java.nio.charset.Charset)">allocateFrom</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="ofAuto()">
<h3>ofAuto</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="Arena.html" title="interface in java.lang.foreign">Arena</a></span>&nbsp;<span class="element-name">ofAuto</span>()</div>
<div class="block">Creates a new arena that is managed, automatically, by the garbage collector.
 Segments allocated with the returned arena can be
 <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a> by any thread.
 Calling <a href="#close()"><code>close()</code></a> on the returned arena will result in an <a href="../UnsupportedOperationException.html" title="class in java.lang"><code>UnsupportedOperationException</code></a>.
 <p>
 Memory segments <a href="#allocate(long,long)">allocated</a> by the returned arena
 are zero-initialized.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a new arena that is managed, automatically, by the garbage collector</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="global()">
<h3>global</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="Arena.html" title="interface in java.lang.foreign">Arena</a></span>&nbsp;<span class="element-name">global</span>()</div>
<div class="block">Returns the global arena. Segments allocated with the global arena can be
          <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a> by any thread.
          Calling <a href="#close()"><code>close()</code></a> on the returned arena will result in
          an <a href="../UnsupportedOperationException.html" title="class in java.lang"><code>UnsupportedOperationException</code></a>.
 <p>
 Memory segments <a href="#allocate(long,long)">allocated</a> by the returned arena
 are zero-initialized.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the global arena</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="ofConfined()">
<h3>ofConfined</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="Arena.html" title="interface in java.lang.foreign">Arena</a></span>&nbsp;<span class="element-name">ofConfined</span>()</div>
<div class="block">Returns a new confined arena. Segments allocated with the confined arena can be
          <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a> by the thread
          that created the arena, the arena's <em>owner thread</em>.
 <p>
 Memory segments <a href="#allocate(long,long)">allocated</a> by the returned arena
 are zero-initialized.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a new confined arena</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="ofShared()">
<h3>ofShared</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="Arena.html" title="interface in java.lang.foreign">Arena</a></span>&nbsp;<span class="element-name">ofShared</span>()</div>
<div class="block">Returns a new shared arena. Segments allocated with the shared arena can be
          <a href="MemorySegment.html#isAccessibleBy(java.lang.Thread)">accessed</a> by any thread.
 <p>
 Memory segments <a href="#allocate(long,long)">allocated</a> by the returned arena
 are zero-initialized.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a new shared arena</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allocate(long,long)">
<h3>allocate</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="MemorySegment.html" title="interface in java.lang.foreign">MemorySegment</a></span>&nbsp;<span class="element-name">allocate</span><wbr><span class="parameters">(long&nbsp;byteSize,
 long&nbsp;byteAlignment)</span></div>
<div class="block">Returns a native memory segment with the given size (in bytes) and alignment
 constraint (in bytes).
 The returned segment is associated with this <a href="#scope()">arena scope</a>.
 The segment's <a href="MemorySegment.html#address()"><code>address</code></a> is the starting address of
 the allocated off-heap region of memory backing the segment, and the address is
 aligned according the provided alignment constraint.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="SegmentAllocator.html#allocate(long,long)">allocate</a></code>&nbsp;in interface&nbsp;<code><a href="SegmentAllocator.html" title="interface in java.lang.foreign">SegmentAllocator</a></code></dd>
<dt>Implementation Requirements:</dt>
<dd>Implementations of this method must return a native segment featuring the
 requested size, and that is compatible with the provided alignment constraint.
 Furthermore, for any two segments <code>S1, S2</code> returned by this method, the
 following invariant must hold:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">    S1.asOverlappingSlice(S2).isEmpty() == true
</code></pre>
</div>
</dd>
<dt>Parameters:</dt>
<dd><code>byteSize</code> - the size (in bytes) of the off-heap region of memory backing
                 the native memory segment</dd>
<dd><code>byteAlignment</code> - the alignment constraint (in bytes) of the off-heap region
                      of memory backing the native memory segment</dd>
<dt>Returns:</dt>
<dd>a new native memory segment</dd>
<dt>Throws:</dt>
<dd><code><a href="../IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>bytesSize &lt; 0</code>, <code>byteAlignment &lt;= 0</code>,
         or if <code>byteAlignment</code> is not a power of 2</dd>
<dd><code><a href="../IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if this arena has already been <a href="#close()">closed</a></dd>
<dd><code><a href="../WrongThreadException.html" title="class in java.lang">WrongThreadException</a></code> - if this arena is confined, and this method is called
         from a thread other than the arena's owner thread</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="scope()">
<h3>scope</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="MemorySegment.Scope.html" title="interface in java.lang.foreign">MemorySegment.Scope</a></span>&nbsp;<span class="element-name">scope</span>()</div>
<div class="block">Returns the arena scope.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the arena scope</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()</div>
<div class="block">Closes this arena. If this method completes normally, the arena scope is no longer
 <a href="MemorySegment.Scope.html#isAlive()">alive</a>, and all the memory segments associated with it
 can no longer be accessed. Furthermore, any off-heap region of memory backing the
 segments obtained from this arena are also released.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../AutoCloseable.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../AutoCloseable.html" title="interface in java.lang">AutoCloseable</a></code></dd>
<dt>API Note:</dt>
<dd>This operation is not idempotent; that is, closing an already closed arena
          <em>always</em> results in an exception being thrown. This reflects a
          deliberate design choice: failure to close an arena might reveal a bug
          in the underlying application logic.</dd>
<dt>Implementation Requirements:</dt>
<dd>If this method completes normally, then
           <code>this.scope().isAlive() == false</code>.
           Implementations are allowed to throw <a href="../UnsupportedOperationException.html" title="class in java.lang"><code>UnsupportedOperationException</code></a>
           if an explicit close operation is not supported.</dd>
<dt>Throws:</dt>
<dd><code><a href="../IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if the arena has already been closed</dd>
<dd><code><a href="../IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if a segment associated with this arena is being
         accessed concurrently, e.g. by a
         <a href="Linker.html#downcallHandle(java.lang.foreign.FunctionDescriptor,java.lang.foreign.Linker.Option...)">downcall method handle</a><sup><a href="Linker.html#restricted-downcallHandle(java.lang.foreign.FunctionDescriptor,java.lang.foreign.Linker.Option...)">RESTRICTED</a></sup></dd>
<dd><code><a href="../WrongThreadException.html" title="class in java.lang">WrongThreadException</a></code> - if this arena is confined, and this method is called
         from a thread other than the arena's owner thread</dd>
<dd><code><a href="../UnsupportedOperationException.html" title="class in java.lang">UnsupportedOperationException</a></code> - if this arena cannot be closed explicitly</dd>
<dd><code><a href="../RuntimeException.html" title="class in java.lang">RuntimeException</a></code> - if an exception is thrown while executing a custom cleanup action
                          associated with this arena (e.g. as a result of calling
                          <a href="MemorySegment.html#reinterpret(long,java.lang.foreign.Arena,java.util.function.Consumer)"><code>MemorySegment.reinterpret(long, Arena, Consumer)</code></a><sup><a href="MemorySegment.html#restricted-reinterpret(long,java.lang.foreign.Arena,java.util.function.Consumer)">RESTRICTED</a></sup> or
                          <a href="MemorySegment.html#reinterpret(java.lang.foreign.Arena,java.util.function.Consumer)"><code>MemorySegment.reinterpret(Arena, Consumer)</code></a><sup><a href="MemorySegment.html#restricted-reinterpret(java.lang.foreign.Arena,java.util.function.Consumer)">RESTRICTED</a></sup>).</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="MemorySegment.Scope.html#isAlive()"><code>MemorySegment.Scope.isAlive()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase22&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2024, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java22speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 22.0.2+9-70 --></small></p>
</footer>
</body>
</html>
